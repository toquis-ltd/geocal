{"version":3,"sources":["reducers/popups.tsx","reducers/settings.tsx","reducers/histories.tsx","reducers/index.tsx","store/index.tsx","store/persist.ts","actions/popups.tsx","actions/settings.tsx","components/common/popup/popup.jsx","icons/back-icon.jsx","icons/close-icon.jsx","components/common/popup/interface/menu-bar/menu.jsx","hooks/useMobileOnly.tsx","icons/search-icon.jsx","components/settings/crs-selector/popup/api.ts","hooks/useSearchBar.tsx","components/settings/crs-selector/popup/views/search/search.jsx","components/settings/crs-selector/popup/views/search/item/item.jsx","hooks/useOutsideClick.tsx","hooks/useCRS.tsx","components/settings/crs-selector/popup/views/search/result/result.jsx","components/settings/crs-selector/popup/views/search/view.jsx","components/common/globe/globe.jsx","components/settings/crs-selector/popup/views/globe/view.jsx","hooks/useCurrentSize.tsx","components/settings/crs-selector/popup/popup.jsx","components/common/button/index.jsx","components/settings/crs-selector/crs-selector.jsx","components/settings/parameters.js","components/settings/settings.jsx","icons/arrow-icon.jsx","calculation/conversion.js","calculation/format.js","components/converter/blocks/fields.jsx","hooks/useCRSUnity.tsx","components/converter/blocks/input.jsx","components/converter/blocks/output.jsx","components/converter/blocks/index.tsx","components/converter/index.tsx","App.tsx","index.tsx"],"names":["PopupReducer","state","isChanging","qwery","result","action","type","payload","SettingsReducer","modifiedCRS","source","target","HistoryReducer","rootReducer","combineReducers","popups","settings","history","throttle","require","persistantState","serializedState","localStorage","getItem","JSON","parse","err","loadState","store","createStore","window","__REDUX_DEVTOOLS_EXTENSION__","subscribe","stringify","setItem","saveState","getState","togglePopup","setCRS","Popup","isOpen","children","ReactDOM","createPortal","className","document","getElementById","BackIcon","props","width","height","viewBox","style","transform","d","CloseIcon","Interface","onClose","isMobile","useState","innerWidth","toggleMobile","handleScreen","useEffect","addEventListener","removeEventListener","useMobileOnly","onClick","SearchIcon","getRequest","app","key","parrams","a","fetch","process","catch","json","quest","fetchProj4","code","useSearchBar","dispatch","useDispatch","useSelector","value","setQwery","fetchCRSList","then","res","setResult","memo","qweryChange","handleResult","onChange","event","onKeyPress","e","element","wraper","useRef","component","isActive","setActive","handleClickOutside","current","contains","useOutsideClick","toggleActive","item","name","uom","unityOfMeasure","proj4","useCRS","ref","area","Math","round","random","Result","_","isEqual","findCRS","find","setFind","length","data","filter","map","elem","index","onSelect","svgRef","rotate","World","feature","world","objects","custom","graticule","d3","projection","scale","translate","path","svg","g","append","attr","on","datum","selectAll","features","enter","properties","call","k","dx","dy","scaleExtent","passive","remove","GlobeView","isRenderFinnished","container","sizeHandle","useLayoutEffect","handleResize","offsetWidth","offsetHeight","useCurrentSize","CrsPopup","SelectBtn","parameters","self","origin","oppositName","other","CrsSelector","title","common","Settings","obj","Arrow","FetchConvertion","point","response","coordinate","Object","values","prop","test","replace","dms_list","toLowerCase","split","sign","abs","m","parseFloat","s","Number","toFixed","toString","convertToDecimal","i","error","console","log","x","y","z","Field","readOnly","placeholder","autoComplete","Fields","unity","includes","useCRSUnity","Input","prev","Output","PointConverter","isConvert","onConvert","points","pointHandle","useCallback","undefined","Converter","toggleConvert","App","render","StrictMode"],"mappings":"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","file":"static/js/main.9b29e456.chunk.js","sourcesContent":["\r\ntype State = {\r\n    isChanging: boolean,\r\n    qwery: String,\r\n    result: Array<any>,\r\n};\r\n\r\nconst PopupReducer = (state:State = {isChanging: false, qwery: '', result: [],} , action:any) => {\r\n    switch (action.type) {\r\n\r\n        case 'crs/toggle':\r\n            return {...state, isChanging:(!state.isChanging) };\r\n        \r\n        case 'crs/setQwery':\r\n            return {...state, qwery:action.payload};\r\n        \r\n        case 'crs/setResult':\r\n            return {...state, result:action.payload};\r\n\r\n        default:\r\n            return state;\r\n    };\r\n\r\n};\r\n\r\nexport default PopupReducer;","type settings = {\r\n    modifiedCRS: 'source' | 'target',\r\n    source:crs,\r\n    target:crs,\r\n}\r\n\r\ntype crs = {\r\n    name?:String,\r\n    code?:number,\r\n    uom?:String,\r\n    proj4?:String;\r\n}\r\n\r\nconst SettingsReducer = (state:settings = {modifiedCRS:'source', source:{}, target:{}}, action:any) => {\r\n    switch (action.type) {\r\n        case 'setOrigin':\r\n            return {...state, modifiedCRS:action.payload}\r\n\r\n        case 'setCRS':\r\n            return {...state, [state.modifiedCRS]:action.payload}\r\n        \r\n        default:\r\n            return state;\r\n    };\r\n\r\n};\r\n\r\nexport default SettingsReducer;","const HistoryReducer = (state=false, action:any) => {\r\n    switch (action.type) {\r\n        default:\r\n            return state;\r\n    };\r\n\r\n};\r\n\r\nexport default HistoryReducer;","import { combineReducers,  } from \"redux\";\r\n\r\nimport PopupReducer from \"./popups\";\r\nimport SettingsReducer from \"./settings\";\r\nimport HistoryReducer from \"./histories\";\r\n\r\nconst rootReducer = combineReducers({\r\n    popups: PopupReducer,\r\n    settings: SettingsReducer,\r\n    history: HistoryReducer,\r\n});\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>;\r\nexport default rootReducer;","import { createStore } from '@reduxjs/toolkit'\r\nimport { saveState, loadState } from './persist';\r\n\r\n\r\nimport rootReducer from '../reducers';\r\n\r\nconst throttle = require('lodash.throttle');\r\n\r\nconst persistantState = loadState();\r\n\r\nconst store = createStore(\r\n        rootReducer,\r\n        persistantState,\r\n        (window as any).__REDUX_DEVTOOLS_EXTENSION__ &&\r\n        (window as any).__REDUX_DEVTOOLS_EXTENSION__()\r\n    );\r\n\r\nstore.subscribe(throttle(() => {\r\n    saveState({\r\n            settings: store.getState().settings,\r\n        });\r\n    }, 1000));\r\n\r\nexport default store;","export const loadState = () => {\r\n    try {\r\n      const serializedState = localStorage.getItem('state');\r\n      if (serializedState === null) {\r\n        return undefined;\r\n      }\r\n      return JSON.parse(serializedState);\r\n    } catch (err) {\r\n      return undefined;\r\n    }\r\n  };\r\n  \r\nexport const saveState = (state:any) => {\r\n    const serializedState = JSON.stringify(state);\r\n    localStorage.setItem('state', serializedState);\r\n\r\n};","export const setQwery = (value:String) => {\r\n    return {\r\n        type: 'crs/setQwery',\r\n        payload: value\r\n    }\r\n}\r\n\r\nexport const setResult = (value:any) => {\r\n    return {\r\n        type: 'crs/setResult',\r\n        payload:  value\r\n    }\r\n}\r\n\r\nexport const togglePopup = (state:boolean) => {\r\n    return {\r\n        type: 'crs/toggle',\r\n        payload: state\r\n    }\r\n}","type crsHeandler = {\r\n    type: string,\r\n    payload: payload\r\n};\r\n\r\ntype payload = {\r\n        name: string,\r\n        code?: number,\r\n        uom?: string,\r\n        area?: string,\r\n        proj4?: string,\r\n};\r\n\r\ntype origin = 'source' | 'target'\r\n\r\nexport const setCRS = (payload:payload):crsHeandler => {\r\n    return {\r\n        type: 'setCRS',\r\n        payload: {...payload}\r\n    };\r\n};\r\n\r\nexport const setOrigin = (payload:origin) => {\r\n    return {\r\n        type: 'setOrigin',\r\n        payload: payload\r\n    }\r\n}","import ReactDOM from 'react-dom';\r\nimport './popup.css';\r\n\r\nfunction Popup ({isOpen, children}) {\r\n  if (!isOpen) return null;\r\n  return ReactDOM.createPortal (\r\n    <div className='popup'>\r\n      <div className={`popup__inner`} >\r\n        {children}\r\n      </div>\r\n    </div>,\r\n    document.getElementById('popup')\r\n    );\r\n}\r\n\r\nexport default Popup;","function BackIcon(props) {\r\n    return (\r\n        <svg width='15' height='15' viewBox=\"0 0 492.004 492.004\" {...props} style={{transform: 'scaleX(-1)'}}>\r\n\t\t    <path d=\"M484.14,226.886L306.46,49.202c-5.072-5.072-11.832-7.856-19.04-7.856c-7.216,0-13.972,2.788-19.044,7.856l-16.132,16.136\r\n                c-5.068,5.064-7.86,11.828-7.86,19.04c0,7.208,2.792,14.2,7.86,19.264L355.9,207.526H26.58C11.732,207.526,0,219.15,0,234.002\r\n                v22.812c0,14.852,11.732,27.648,26.58,27.648h330.496L252.248,388.926c-5.068,5.072-7.86,11.652-7.86,18.864\r\n                c0,7.204,2.792,13.88,7.86,18.948l16.132,16.084c5.072,5.072,11.828,7.836,19.044,7.836c7.208,0,13.968-2.8,19.04-7.872\r\n                l177.68-177.68c5.084-5.088,7.88-11.88,7.86-19.1C492.02,238.762,489.228,231.966,484.14,226.886z\"/>\r\n        </svg>\r\n    );\r\n}\r\n\r\nexport default BackIcon;","function CloseIcon(props) {\r\n    return (\r\n        <svg height=\"10px\" width=\"10px\" viewBox=\"0 0 329.26933 329\">\r\n            <path d=\"m194.800781 164.769531 128.210938-128.214843c8.34375-8.339844 8.34375-21.824219 \r\n                    0-30.164063-8.339844-8.339844-21.824219-8.339844-30.164063 0l-128.214844 \r\n                    128.214844-128.210937-128.214844c-8.34375-8.339844-21.824219-8.339844-30.164063 \r\n                    0-8.34375 8.339844-8.34375 21.824219 0 30.164063l128.210938 128.214843-128.210938 \r\n                    128.214844c-8.34375 8.339844-8.34375 21.824219 0 30.164063 4.15625 4.160156 9.621094 6.25 \r\n                    15.082032 6.25 5.460937 0 10.921875-2.089844 15.082031-6.25l128.210937-128.214844 128.214844 \r\n                    128.214844c4.160156 4.160156 9.621094 6.25 15.082032 6.25 5.460937 0 10.921874-2.089844 \r\n                    15.082031-6.25 8.34375-8.339844 8.34375-21.824219 0-30.164063zm0 0\"/>\r\n        </svg>\r\n    );\r\n}\r\n\r\nexport default CloseIcon;","import { useMobileOnly } from 'hooks/useMobileOnly';\r\n\r\nimport BackIcon from '../../../../../icons/back-icon';\r\nimport CloseIcon from '../../../../../icons/close-icon';\r\n\r\nimport '../common.sass';\r\nimport './menu.sass';\r\n\r\nfunction Interface({onClose}) {\r\n        const isMobile = useMobileOnly();\r\n        return (\r\n                <div className=\"popup__menu-bar\">\r\n                        <button \r\n                        className='popup__close-btn'\r\n                        onClick={onClose}>\r\n                                { (isMobile) ? <><BackIcon/><span>Back</span></> : <CloseIcon/> }\r\n                        </button>\r\n                </div>\r\n        );\r\n}\r\n\r\nexport default Interface;","import { useState, useEffect } from \"react\";\r\n\r\nexport function useMobileOnly () {\r\n    const size = 1024; // this is the limit of screen size for a desktop\r\n    const [isMobile, toggleMobile] =  useState(window.innerWidth <= size);\r\n    const handleScreen = () => toggleMobile(window.innerWidth <= size);\r\n\r\n    useEffect(() => {\r\n            window.addEventListener('resize', handleScreen);\r\n            return () => window.removeEventListener('resize', handleScreen);\r\n    }, []);\r\n\r\n    return isMobile\r\n}","function SearchIcon(props) {\r\n    return (\r\n        <svg width=\"15px\" height=\"12px\" viewBox=\"0 0 612.01 612.01\" {...props}>\r\n            <path d=\"M606.209,578.714L448.198,423.228C489.576,378.272,515,318.817,515,253.393C514.98,113.439,399.704,0,257.493,0\r\n                        C115.282,0,0.006,113.439,0.006,253.393s115.276,253.393,257.487,253.393c61.445,0,117.801-21.253,162.068-56.586\r\n                        l158.624,156.099c7.729,7.614,20.277,7.614,28.006,0C613.938,598.686,613.938,586.328,606.209,578.714z M257.493,467.8\r\n                        c-120.326,0-217.869-95.993-217.869-214.407S137.167,38.986,257.493,38.986c120.327,0,217.869,95.993,217.869,214.407\r\n                        S377.82,467.8,257.493,467.8z\"/>\r\n        </svg>\r\n    );\r\n}\r\n\r\nexport default SearchIcon;","async function getRequest(app:String, key:String, parrams:string | number) {\r\n    return (await fetch(`${process.env.REACT_APP_HOST}/api/${app}/?format=json&${key}=${parrams}`).catch()).json();\r\n}\r\n\r\nexport async function fetchCRSList(quest:string){\r\n    return await getRequest('search', 'q', quest);\r\n}\r\n\r\nexport async function fetchProj4(code:number) {\r\n    return await getRequest('proj4', 'crs',  code);\r\n}","import { DefaultRootState, useDispatch, useSelector } from \"react-redux\";\r\nimport { setQwery, setResult } from \"actions/popups\";\r\nimport { fetchCRSList } from \"components/settings/crs-selector/popup/api\";\r\n\r\nexport default function useSearchBar() {\r\n    const dispatch = useDispatch();\r\n    const state = useSelector(({popups}:DefaultRootState) => popups.qwery);\r\n    const changeHandle = (value:string) => dispatch(setQwery(value));\r\n    const fetchListHandle = (value?:string) => {\r\n        fetchCRSList(value || state).then(res => {\r\n            dispatch(setResult(res));\r\n        })\r\n    }\r\n    return [state, changeHandle, fetchListHandle]\r\n}","import { memo } from 'react';\r\n\r\nimport SearchIcon from 'icons/search-icon';\r\nimport CloseIcon from 'icons/close-icon';\r\n\r\nimport useSearchBar from 'hooks/useSearchBar';\r\n\r\nimport './search.sass';\r\n\r\nexport default memo(function Search() {\r\n\r\n    const [qwery, qweryChange, handleResult] = useSearchBar();\r\n    const clearQwery = () => qweryChange('');\r\n\r\n    return (\r\n        <div className='search'>\r\n            <div className='search__inner'>\r\n                <div className=\"search__bar\">\r\n                    <div className=\"search__bar-inner\">\r\n                        <input \r\n                            className='search__field' \r\n                            onChange={event=>qweryChange(event.target.value)} \r\n                            onKeyPress={e=> e.key==='Enter' && handleResult(qwery)}\r\n                            value={qwery}/>\r\n                        {qwery && <button className='search__btn search__btn-clear' onClick={clearQwery}><CloseIcon/></button> }\r\n                        <button className='search__btn search__btn-find' onClick={()=>handleResult(qwery)}><SearchIcon/></button>\r\n                    </div>\r\n                </div>\r\n                <div className=\"search__filters\">\r\n                    <div className=\"search__uom\">\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n","import { useRef, memo } from 'react';\r\n\r\nimport useCRS  from 'hooks/useCRS';\r\n\r\nimport useOutsideClick from 'hooks/useOutsideClick';\r\n\r\nimport './item.sass'\r\n\r\nexport default memo(function CrsItem({element}) {\r\n    const wraper =  useRef(null);\r\n    const [isActive, toggleActive] = useOutsideClick(wraper);\r\n    const handleClick = () => toggleActive(!isActive);\r\n    const setCRS = useCRS();\r\n    const handleSelect = () => setCRS(element);\r\n\r\n    return (\r\n        <div className={`result__item ${ (isActive) ? 'result__item--activate':''}`} key={Math.round(Math.random()*10**5)} ref={wraper}>\r\n            <div className=\"result__item-about\" onClick={handleClick} >\r\n                <h3 className='result__item-title'>{element.name}</h3>\r\n                <h4 className='result__item-description result__item-description--area'>Area: {element.area}</h4>\r\n                <h4 className='result__item-description result__item-description--unity'>Unity: {element.unityOfMeasure}</h4>\r\n                <h4 className='result__item-description result__item-description--code'>EPSG Code: {element.code}</h4>\r\n            </div>\r\n            { isActive &&\r\n                <div className=\"result__item-control\">\r\n                    <button className='base__button result__btn result__item-select' onClick={handleSelect}>Select</button>\r\n                    <button className='base__button result__btn result__item-fork'>Derive</button>\r\n                </div>\r\n            }\r\n        </div>\r\n    );\r\n});","import {useState, useEffect} from 'react';\r\n\r\ninterface Div extends HTMLElement {\r\n    current: {\r\n        contains: Function\r\n    }\r\n};\r\n\r\nexport default function useOutsideClick(component:Div) {\r\n    const [isActive, setActive] = useState<Boolean>(false);\r\n    \r\n    useEffect(() => {\r\n        const handleClickOutside = (event:MouseEvent) => {\r\n            if (isActive && component.current && !component.current.contains(event.target)) {\r\n                    setActive(false);\r\n                }\r\n        }\r\n        document.addEventListener('mouseup', handleClickOutside);\r\n\r\n        return () => document.removeEventListener('mouseup', handleClickOutside);\r\n    }, [isActive, component]);\r\n  \r\n    return [isActive, setActive] as const;\r\n}","import { setCRS } from \"actions/settings\";\r\nimport { fetchProj4 } from \"components/settings/crs-selector/popup/api\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\ntype crs = {\r\n    name:string,\r\n    code:number,\r\n    unityOfMeasure?:string,\r\n}\r\n\r\nexport default function useCRS () {\r\n    const dispatch = useDispatch();\r\n    const set = (item:crs) => {\r\n        fetchProj4(item.code).then((res:string)=>{\r\n            dispatch(setCRS({\r\n                name: item.name,\r\n                code: item.code,\r\n                uom: item.unityOfMeasure,\r\n                proj4: res\r\n            }));\r\n        });\r\n    };\r\n    return set\r\n}","import { useEffect, useState} from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport _ from 'underscore';\r\n\r\nimport CrsItem from '../item/item';\r\n\r\nimport './result.sass';\r\n\r\nexport default function Result () {\r\n    const settings = useSelector(state => state.settings, _.isEqual);\r\n    const result = useSelector(state => state.popups.result);\r\n    const [find, setFind] = useState(result?.findCRS);\r\n\r\n    useEffect(() => {\r\n        if (settings?.modifiedCRS === 'target' && result?.findCRS?.length > 1) {\r\n            const data = find?.filter(item => item.code !== settings.source.code);\r\n            setFind(data);\r\n        }\r\n        setFind(result?.findCRS)\r\n    }, [result?.findCRS, find, settings])\r\n\r\n    return(\r\n        <div className='result'>\r\n                <div className=\"result__inner\">\r\n                    {\r\n                        find?.map( (elem, index) => <CrsItem element={elem} key={index}/> )\r\n                    }\r\n                </div>\r\n        </div>\r\n    )\r\n}","import {memo} from 'react';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport {setCRS} from 'actions/settings'\r\n\r\nimport Search from './search';\r\nimport Result from './result/result';\r\n\r\nimport { fetchProj4 } from '../../api';\r\n\r\nimport './view.sass';\r\n\r\nexport default memo(function SearchView() {\r\n    \r\n    const dispatch = useDispatch();\r\n    \r\n    const selectHandle = element => {\r\n        fetchProj4(element.code).then(res=>{\r\n            dispatch(setCRS({\r\n                name: element.name,\r\n                code: element.code,\r\n                uom: element.unityOfMeasure,\r\n                proj4: res\r\n            }));\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div className=\"view__search\">\r\n            <Search />\r\n            <Result onSelect={selectHandle} />\r\n        </div>\r\n    );\r\n});","// @ts-nocheck\r\nimport { useRef, useEffect,  memo } from 'react';\r\nimport { feature } from 'topojson';\r\nimport * as d3 from 'd3';\r\n\r\nimport world from '../../../data/globe.json';\r\n// import test from '../../../data/notOptim.json';\r\n\r\nimport './globe.sass'\r\n\r\nexport default memo(function Globe({width, height, onSelect}) {\r\n        \r\n    const svgRef = useRef(null);\r\n    const rotate = useRef([0,0,0]);\r\n    const World = feature(world, world.objects.custom);\r\n\r\n    useEffect(()=>{\r\n        rotate.current =  (typeof window.localStorage.getItem('rotate') === 'string') ?\r\n                        JSON.parse(window.localStorage.getItem('rotate')) : rotate.current;\r\n    }, [])\r\n    \r\n    //globe logic\r\n    useEffect(() => {\r\n\r\n            const graticule = d3.geoGraticule();\r\n            const projection = d3.geoOrthographic()\r\n                            .scale(width/3.5) //3.5 is scale coef witch work well with width*0.8 of parent size and inherit heeght\r\n                            .translate([width/3, height/3])\r\n                            .rotate(rotate.current);\r\n\r\n            const path = d3.geoPath(projection);\r\n            const svg = d3.select(svgRef.current);\r\n            const g = svg.append('g')\r\n\r\n            g.append('path')\r\n                .attr('class', 'sphere')\r\n                .attr('d', path({type: 'Sphere'}))\r\n                .on(\"click\", (event,d)=>{\r\n                    onSelect(\"World\")\r\n                });\r\n\r\n            g.append('path')\r\n                .datum(graticule)\r\n                .attr(\"class\", \"graticule\")\r\n                .attr('d', path)\r\n            \r\n            g.selectAll('.country')\r\n                .data(World.features)\r\n                .enter()\r\n                .append('path')\r\n                .attr('d', path)\r\n                .attr('class', 'country')\r\n            \r\n            \r\n            /*                  Listeners\r\n            ###################################################\r\n            ###################################################\r\n            */\r\n            \r\n            g.selectAll('.country')\r\n                .on(\"click\", (event, d) => {\r\n                    onSelect(d.properties.name)\r\n                });\r\n            \r\n            g.call(d3.drag()\r\n                            .on(\"drag\", (event, d) => {\r\n                                    const k = 50 / projection.scale()\r\n                                    rotate.current = projection.rotate();\r\n                                    projection.rotate([\r\n                                    rotate.current[0] + event.dx * k,\r\n                                    rotate.current[1] - event.dy * k\r\n                                ])\r\n                                \r\n                                g.selectAll(\".graticule\").attr(\"d\", path);\r\n                                g.selectAll(\"path\").attr(\"d\", path)\r\n                                g.selectAll('.sphere').attr(\"d\", path({type: 'Sphere'}))\r\n\r\n                            })\r\n                            .on(\"end\", (event, d) => {\r\n                                window.localStorage.setItem('rotate', JSON.stringify(projection.rotate()));\r\n                            })\r\n            );\r\n            \r\n            g.call(d3.zoom()\r\n                .scaleExtent([1, 10])\r\n                .on('zoom', event => {\r\n                    g.selectAll('country', event.transform);\r\n                }, {passive: true})\r\n            );\r\n            \r\n            return () => {\r\n                svg.selectAll('g').remove()\r\n            }\r\n            \r\n            }, [World.features, rotate, width, height, onSelect]);\r\n\r\n    return <svg width={width} height={height} ref={svgRef}/>\r\n});","import useSearchBar from 'hooks/useSearchBar';\r\nimport useCurrentSize from '../../../../../../hooks/useCurrentSize';\r\n\r\nimport Globe from '../../../../../common/globe/globe';\r\n\r\nimport './view.sass';\r\n\r\nexport default function GlobeView() {\r\n    \r\n    const [, qweryChange, handleResult] = useSearchBar();\r\n    const handleSelect = (value) => {\r\n        qweryChange(value);\r\n        handleResult(value);\r\n    }\r\n\r\n    const [ref, container] = useCurrentSize();\r\n    \r\n    return (\r\n        <div className=\"view__globe\" ref={ref}>\r\n            {container.isRenderFinnished && <Globe width={container.width*0.8} height={container.height} onSelect={handleSelect}/>}\r\n        </div>\r\n    )\r\n}","import { useState, useLayoutEffect, useRef} from \"react\";\r\n\r\ntype Prop = {\r\n    isRenderFinnished:Boolean, \r\n    width?: number, \r\n    height?: number,\r\n}\r\n\r\nexport default function useCurrentSize() {\r\n\r\n    const ref = useRef<HTMLInputElement>(null);\r\n    const [container, sizeHandle] = useState<Prop>({isRenderFinnished:false});\r\n\r\n    useLayoutEffect(() => {\r\n        const handleResize = () => sizeHandle({\r\n                                                isRenderFinnished:true, \r\n                                                width: ref?.current?.offsetWidth,\r\n                                                height:ref?.current?.offsetHeight\r\n                                            });        \r\n        handleResize();\r\n        window.addEventListener('resize', handleResize, false);\r\n        return () => {\r\n            window.removeEventListener('resize', handleResize, false);\r\n        }\r\n    }, [])\r\n\r\n    return [ref, container] as const;\r\n}","import { useSelector } from 'react-redux';\r\n\r\nimport Popup from 'components/common/popup/popup';\r\nimport Interface from 'components/common/popup/interface/menu-bar/menu';\r\n\r\nimport SearchView from './views/search/view';\r\nimport GlobeView from './views/globe/view';\r\n\r\nimport './popup.sass';\r\n\r\nfunction CrsPopup({ onClose }) {\r\n    const state = useSelector(state => state.popups.isChanging);\r\n\r\n    return (\r\n        <Popup isOpen={state}>\r\n            <Interface onClose={onClose}/>\r\n            <div className=\"view\">\r\n                <div className=\"view__inner\">\r\n                    <SearchView />\r\n                    <GlobeView />\r\n                </div>\r\n            </div>\r\n        </Popup>\r\n    )\r\n}\r\n\r\nexport default CrsPopup;","import { useSelector } from 'react-redux';\r\n\r\nimport './button.sass';\r\n\r\n\r\nfunction SelectBtn ({onClick, parameters}) {\r\n    const self = useSelector(state => state.settings[parameters.origin]);\r\n    const oppositName = parameters.origin==='source' ? 'target':'source';\r\n    const other = useSelector(state => state.settings[oppositName]);\r\n    \r\n    return (\r\n        <button className='selector__btn' onClick={onClick}>\r\n            { (self.name && self.name === other.name) ? self.name + ' EPSG code:' + self.code : self.name || 'Click to select CRS' }\r\n        </button>\r\n    );\r\n}\r\n\r\nexport default SelectBtn;","import { useDispatch } from 'react-redux';\r\n\r\nimport { togglePopup } from '../../../actions/popups';\r\nimport { setOrigin } from '../../../actions/settings';\r\n\r\nimport CrsPopup from './popup/popup';\r\nimport SelectBtn from 'components/common/button';\r\n\r\nimport './crs-selector.css';\r\n\r\nexport default function CrsSelector ({parameters}) {\r\n    const dispatch = useDispatch();\r\n\r\n    const closePopup = () => dispatch(togglePopup(false));\r\n    const openPopup = () => {\r\n        dispatch(togglePopup(true));\r\n        dispatch(setOrigin(parameters.origin))\r\n    }\r\n    return (\r\n        <div className='selector'>\r\n            <div className='selector__header'>\r\n                <h3 className=\"field-title selector__title\">{parameters.title}</h3>\r\n            </div>\r\n            <div className='selector__container'>\r\n                <SelectBtn onClick={openPopup} parameters={parameters}/>\r\n            </div>\r\n            <div className='selector__footer'>\r\n            </div>\r\n            <CrsPopup onClose={closePopup}/>\r\n        </div>\r\n    );\r\n};","const common = {\r\n    title: ' coordinate reference system'\r\n};\r\n\r\nexport const source = {\r\n    title:('Source'+common.title),\r\n    origin: 'source',\r\n};\r\n\r\nexport const target = {\r\n    title:('Target'+common.title),\r\n    origin: 'target',\r\n};","import './settings.css';\r\n\r\nimport CrsSelector from './crs-selector/crs-selector'\r\nimport {source, target} from './parameters.js';\r\n\r\nfunction Settings() {\r\n    \r\n    return (\r\n        <div className=\"converter__settings\">\r\n            {[source, target].map((obj, index)=><CrsSelector parameters={obj} key={index}/>)}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Settings;","export default function Arrow(){\r\n    return (\r\n        <svg width=\"15px\" height=\"10px\" viewBox=\"0 0 612.01 612.01\" style={{transform: 'scale(1.4)' }}>\r\n            <path d=\"M509.035,248.212l-213.504-212.8c-3.051-3.029-7.595-3.904-11.627-2.304c-3.989,1.664-6.571,5.547-6.571,9.856v117.333\r\n\t\t\tH10.667C4.779,160.298,0,165.076,0,170.964v170.667c0,5.888,4.779,10.667,10.667,10.667h266.667v116.885\r\n\t\t\tc0,4.309,2.603,8.192,6.592,9.856c1.323,0.555,2.709,0.811,4.075,0.811c2.773,0,5.504-1.088,7.552-3.115l213.504-213.419\r\n\t\t\tc2.005-2.005,3.115-4.715,3.115-7.552C512.171,252.927,511.04,250.218,509.035,248.212z\"/>\r\n        </svg>\r\n    )\r\n} ","import proj4 from 'proj4';\r\n\r\nimport {convertToDecimal} from './format'\r\n\r\nexport default function FetchConvertion(source, target, point) {\r\n    let response;\r\n    try {\r\n        const coordinate = Object.values(point)\r\n                                        .map(prop=>convertToDecimal(prop))\r\n                                        .map(i => parseFloat(parseFloat(i).toFixed(8)))\r\n                                        \r\n        response = proj4(source, target, coordinate).map(item => item.toFixed(7).toString());\r\n    } catch (error) {\r\n        console.log(error)\r\n        response = ['-', '-', '-'];\r\n    }\r\n    return {x:response[0], y:response[1], z:response[2]}\r\n}","export function convertToDMS (value, m = 0, s = 0)  {\r\n    value = value.toString();\r\n    if (value.length === 0) return \"0째0'0\"  \r\n    if (/'|\"/.test(value) === true) return value\r\n    \r\n    let d = value.split(\".\")[0];\r\n    if (value.split(\".\").length>1)\r\n    {\r\n      m = parseInt((\".\"+(value.split(\".\")[1]))*60);\r\n      s = Number((\".\"+(value.split(\".\")[1])-m/60)*3600).toFixed(6).replace(/(\\.0+|0+)$/, '');\r\n    }\r\n    return `${d}째${m}'${s}`\r\n};\r\n\r\nexport function convertToDecimal (value)  {\r\n    \r\n    // exception case  \r\n    if (value.length === 0) return '0'; // if value is empty\r\n    if (/'|\"/.test(value) === false) return value; // if value doesn't contain any separator\r\n    \r\n    //prepare value\r\n    value.replace('\"', ''); // \r\n    value = value.toLowerCase(); //\r\n\r\n    //if 'w' or 'e' char in value\r\n    //when remove it and transform to oposit digit\r\n    const chartRe = /w|e/g;\r\n    let  dms_list = value.split(/째|'|\"/);\r\n    let sign = Math.sign(Math.sign(dms_list[0])*2+1);\r\n\r\n    if (chartRe.test(value)){\r\n      value = value.replace(/w|e/g, '');\r\n      dms_list = value.split(/째|'|\"/);\r\n      sign*=-1;\r\n    }\r\n\r\n    //convert \r\n    const d = Math.abs(dms_list[0]);\r\n    const m = parseFloat(dms_list[1]/60);\r\n    const s = parseFloat(dms_list[2]/3600);\r\n    return Number((d+m+s)*sign).toFixed(10).replace(/(\\.0+|0+)$/, '').toString();\r\n};\r\n\r\n// export default function FetchFormat(point) {\r\n//     switch ('DMS'){\r\n//       case 'DMS':\r\n//         const response = Object.values(point).forEach(prop => {\r\n//           convertToDecimal(prop)\r\n//         });\r\n//         return {x:response[0], y:response[1], z:response[2]}\r\n//     } \r\n// }","import useCRSUnity from \"hooks/useCRSUnity\";\r\n\r\nfunction Field({className, name, point, readOnly, placeholder, onChange}) {\r\n    return (\r\n        <input \r\n            className={`${className}-coordinate__field fields__item-field`}\r\n            onChange={onChange}\r\n            name={name}\r\n            value={point[name] || \"\"}\r\n            placeholder={placeholder}\r\n            autoComplete=\"off\"\r\n            readOnly={readOnly}\r\n            type='tel'/>\r\n\r\n    )\r\n};\r\n\r\nexport function Fields ({name, point, origin, onChange=()=>null}) {\r\n    const unity = useCRSUnity(origin);\r\n    const readOnly = name !== 'input'\r\n    return (\r\n        <div className={`${name}-fields__container fields__container`}>\r\n            \r\n            <Field className={name} name='x' onChange={onChange} point={point} readOnly={readOnly} placeholder={unity[0]}/>\r\n            <Field className={name} name='y' onChange={onChange} point={point} readOnly={readOnly} placeholder={unity[1]}/>\r\n            <Field className={name} name='z' onChange={onChange} point={point} readOnly={readOnly} placeholder={unity[2]}/>\r\n        </div>\r\n        )\r\n}","import { DefaultRootState, useSelector } from \"react-redux\"\r\n\r\ntype crs = 'source' | 'target'\r\n\r\nexport default function useCRSUnity (origin:crs) {\r\n    const unity = useSelector(({settings}:DefaultRootState) => settings[origin].uom)\r\n    const deglist = ['degree', 'unknown', 'sexagesimal', ' DMS.s'];\r\n    if (deglist.includes(unity+'')) return ['Longitude', 'Latitude', 'Altitude'];\r\n    return ['X', 'Y', 'Z'];\r\n}","import { Fields } from \"./fields\";\r\n\r\nexport function Input ({point, onChange}) {\r\n    const handleChange = event => {\r\n      onChange(prev => ({...prev, source:{...point, [event.target.name]:event.target.value}}));\r\n    }\r\n    return (\r\n      <div className=\"input-fields\">\r\n        <div className=\"input-fields__header\">\r\n        </div>\r\n        <div className=\"input-fields__container fields__container\">\r\n          <Fields name='input' point={point} origin={'source'} onChange={handleChange} />\r\n        </div>\r\n      </div>\r\n    )\r\n}","import { Fields } from './fields'\r\nexport function Output ({point}) {\r\n    return (\r\n      <div className=\"output-fields\">\r\n        <div className=\"output-fields__header\">\r\n        </div>\r\n        <div className=\"output-fields__container fields__container\">\r\n            <Fields name='output' point={point} origin='target' />\r\n        </div>\r\n      </div>\r\n    )\r\n}","import { DefaultRootState, useSelector } from 'react-redux';\r\n\r\nimport  Arrow  from 'icons/arrow-icon'\r\nimport FetchConvertion from 'calculation/conversion';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { Input } from './input';\r\nimport { Output } from './output';\r\n\r\nimport './block.sass';\r\nimport { useCallback } from 'react';\r\n\r\ntype Points = {\r\n  source: Point,\r\n  target: Point\r\n};\r\n\r\ntype Point = {\r\n  x?: string\r\n  y?: string\r\n  z?: string\r\n\r\n};\r\n\r\ntype Prop = {\r\n  isConvert:boolean\r\n  onConvert: Function\r\n}\r\n\r\nexport function PointConverter ({isConvert, onConvert}:Prop) {\r\n  const [points, pointHandle] = useState<Points>({source:{}, target:{}})\r\n  const source = useSelector(({settings}:DefaultRootState)=>settings.source.proj4);\r\n  const target = useSelector(({settings}:DefaultRootState)=>settings.target.proj4);\r\n  const transform = useCallback(()=>{\r\n    if (source !== undefined && target !== undefined) {\r\n      pointHandle({...points, target:FetchConvertion(source+'', target+'', points.source)})\r\n      onConvert()\r\n    }\r\n  }, [points, source, target, onConvert])\r\n\r\n  useEffect(()=>{\r\n    if (isConvert) {\r\n      transform()\r\n    }\r\n  }, [isConvert, transform])\r\n\r\n  return (\r\n    <div className=\"point-converter__colomn\">\r\n      {/* <button className=\"base__button fields__format-btn\" >format</button> */}\r\n      <Input point={points.source} onChange={pointHandle}/>\r\n      <Arrow />\r\n      <Output point={points.target}/>\r\n    </div>\r\n  )\r\n};","import { useState } from 'react'\r\nimport { PointConverter } from './blocks'\r\n\r\nimport './index.sass'\r\n\r\nexport default function Converter () {\r\n    const [isConvert, toggleConvert] = useState(false);\r\n    const handleConvert = () => toggleConvert(true);\r\n    const endConvertion = () => toggleConvert(false);\r\n\r\n    return (\r\n        <div className='point-converter'>\r\n            <h3 className=\"field-title\">\r\n                Point Converter\r\n            </h3>\r\n            <div className=\"point-converter__inner\">\r\n                <div className=\"point-converter__items\">\r\n                   <PointConverter isConvert={isConvert} onConvert={endConvertion} />\r\n                </div>\r\n            </div>\r\n            <div className=\"point-converter__buttons-list\">\r\n                <button className='base__button point-converter__button share-btn' > Donwload CSV </button>\r\n                <button className='base__button point-converter__button convert-btn' onClick={handleConvert}> Convert </button>\r\n                <button className='base__button point-converter__button share-btn' > Share link </button>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import Settings from './components/settings/settings';\nimport Converter from './components/converter';\n\nimport './App.css';\n\nfunction App() {\n  return (\n    <div className='converter'>\n      <Settings/>\n      <Converter/>\n    </div>\n    );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport { Provider } from 'react-redux'\nimport store from './store'\n\nimport App from './App';\n\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App/>\n    </Provider>\n  </React.StrictMode>\n  ,\n  document.getElementById('root')\n);"],"sourceRoot":""}